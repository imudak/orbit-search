# 軌道タブUI改善

## 概要
デモデザイン（`docs/ui-design-proposals/demo/ergonomic-ui.html`）に近づけた軌道タブのアニメーションコントロールUIを実装し、衛星アイコンの表示も改善しました。

## 実装内容

### 1. 軌道タブのアニメーションコントロールUI改善

#### 変更前の問題点
- 複雑なUIで操作が分かりにくい
- 多くの機能が詰め込まれており、直感的でない
- デモデザインとの一貫性がない

#### 変更内容
1. `AnimationControlPanel.tsx`と`OrbitControlPanel.tsx`を修正
   ```typescript
   // シンプルなレイアウトに変更
   <Box sx={{ mb: 2 }}>
     <Typography variant="body2" sx={{ mb: 1 }}>時間制御</Typography>
     <TextField
       fullWidth
       size="small"
       value={formatDateTime(currentTime)}
       sx={{ mb: 1 }}
       InputProps={{
         readOnly: true,
       }}
     />
     <Slider
       value={currentTimeValue}
       min={startTimeValue}
       max={endTimeValue}
       onChange={(_, value) => {
         onSeek(new Date(value as number));
       }}
       sx={{
         color: 'primary.main',
         height: 4,
         '& .MuiSlider-thumb': {
           width: 20,
           height: 20,
         },
       }}
     />
   </Box>
   ```

2. デモデザインに合わせた要素を実装
   - 時間制御セクション（テキストフィールドとスライダー）
   - 再生速度コントロール（スライダーと速度表示）
   - シンプルな再生/停止ボタンとリセットボタン
   - 軌道情報セクション（周回周期、軌道傾斜角、離心率など）

3. デザインの統一
   - 白背景のカード形式に変更
   - 適切な余白とスペーシングの設定
   - 一貫したフォントサイズと色の使用

### 2. 衛星アイコンの表示改善

#### 変更前の問題点
- アニメーション停止時に衛星アイコンが消える
- 移動中に衛星アイコンが点滅する
- 可視衛星リストのアイコンとデザインが異なる

#### 変更内容
1. `Map/index.tsx`の条件を変更して、アニメーション停止時にも衛星アイコンを表示
   ```typescript
   {/* 衛星アニメーション */}
   <LayerRenderer layerId="satellite-animation">
     {orbitPaths.length > 0 && (
       <SatelliteAnimationLayer
         path={orbitPaths[0]}
         animationState={animationState}
         onPositionUpdate={handlePositionUpdate}
       />
     )}
   </LayerRenderer>
   ```

2. `SatelliteAnimationLayer.tsx`を修正して点滅を防止
   ```typescript
   // マーカーの設定を変更
   satelliteMarkerRef.current = L.marker([point.lat, lng], {
     icon: satelliteIcon,
     zIndexOffset: 1000, // 他のマーカーより前面に表示
     // アニメーションを無効化して点滅を防止
     interactive: true,
     bubblingMouseEvents: false
   }).addTo(map);

   // アニメーションなしで位置を更新
   satelliteMarkerRef.current.setLatLng([point.lat, lng], { animate: false });
   ```

3. `satellite.css`に新しいスタイルを追加
   ```css
   /* 青い衛星アイコンのスタイル */
   .satellite-icon-blue {
     /* 常に表示されるようにする */
     opacity: 1 !important;
     /* 他の要素より前面に表示 */
     z-index: 1000 !important;
     /* 影をつけて目立たせる */
     filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8));
   }
   ```

4. `satellite.svg`を修正して可視衛星リストのアイコンと同様のデザインに変更

## 結果
- デモデザインに近い、シンプルで使いやすい軌道タブUIになりました
- アニメーション停止時にも衛星アイコンが表示されるようになりました
- 通常の表示モードでは衛星アイコンの点滅が発生しなくなりました
- 衛星アイコンのデザインが可視衛星リストのアイコンと統一されました

## 今後の課題
- モバイル表示時のレイアウト最適化
- アニメーション速度の細かい調整機能の追加
- 複数衛星の同時アニメーション表示
