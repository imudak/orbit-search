# サイドバー改善実装

## 概要
サイドバーの使いやすさを向上させるため、以下の2つの機能を実装しました：
1. サイドバーの幅を可変にする機能
2. モバイル表示時にサイドバーを閉じるボタンの追加

## 実装内容

### 1. サイドバーの幅を可変にする機能
- `ResponsiveMapLayout.tsx`を修正し、サイドパネルの幅をステート管理するようにしました
- リサイズハンドルを追加し、ドラッグで幅を変更できるようにしました
- 最小幅（200px）と最大幅（500px）を設定し、使いやすさを確保しました
- マウスイベントを使用してリサイズ機能を実装しました

```tsx
// サイドパネルコンテナ - リサイズ可能
const SidePanel = styled(Box, {
  shouldForwardProp: (prop) => prop !== 'width'
})<{ width: number }>(({ theme, width }) => ({
  width: `${width}px`,
  height: '100%',
  borderRight: '1px solid rgba(0, 0, 0, 0.1)',
  backgroundColor: '#f5f5f5',
  position: 'relative',
  minWidth: '200px',
  maxWidth: '500px',
  // ...
}));

// リサイズハンドル
const ResizeHandle = styled(Box)(({ theme }) => ({
  position: 'absolute',
  right: '-5px',
  top: 0,
  width: '10px',
  height: '100%',
  cursor: 'ew-resize',
  zIndex: 1000,
  '&:hover': {
    backgroundColor: 'rgba(0, 0, 0, 0.05)',
  },
  // ...
}));
```

### 2. モバイル表示時にサイドバーを閉じるボタンの追加
- モバイル表示時のドロワーコンポーネントに閉じるボタンを追加しました
- Material-UIの`CloseIcon`を使用し、アクセシビリティに配慮しました
- ボタンの配置は右上に設定し、視認性と操作性を向上させました

```tsx
{/* モバイル表示時のドロワー */}
{isMobile && (
  <Drawer
    anchor="left"
    open={drawerOpen}
    onClose={toggleDrawer}
  >
    <Box sx={{
      display: 'flex',
      justifyContent: 'flex-end',
      padding: '8px',
      borderBottom: '1px solid rgba(0, 0, 0, 0.1)'
    }}>
      <IconButton
        onClick={toggleDrawer}
        aria-label="メニューを閉じる"
        size="large"
      >
        <CloseIcon />
      </IconButton>
    </Box>
    <DrawerContent>
      {sidePanel}
    </DrawerContent>
  </Drawer>
)}
```

## 技術的詳細
- リサイズ機能は、マウスイベント（mousedown, mousemove, mouseup）を使用して実装しました
- リサイズ中はイベントをdocumentレベルで捕捉し、コンポーネントの外部でマウスを移動しても正しく動作するようにしました
- useEffectフックを使用して、コンポーネントのマウント/アンマウント時にイベントリスナーを適切に管理しています
- アクセシビリティに配慮し、aria-labelを追加しました

## 今後の改善点
- キーボードでもリサイズできるようにする（アクセシビリティ向上）
- リサイズ時のパフォーマンス最適化
- ユーザーの設定を保存し、次回訪問時に同じ幅で表示する機能
