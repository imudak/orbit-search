# メモリ使用量削減の実装

## 概要
TLEリストを取得後、各TLEに対して軌道計算を行い、その結果全体をメモリに保持していましたが、これによりメモリ使用量が大きくなっていました。この問題を解決するために、軌道計算結果を保持せず、必要なパラメータのみを保持するように改善しました。

## 変更内容

### 1. TLEデータの保持方法の変更
- `Map`コンポーネントに`selectedTLE`状態を追加し、選択された衛星のTLEデータのみを保持するように変更
- 軌道計算結果全体を保持せず、リストの項目表示と分析タブで使用するパラメータだけを保持するように変更

### 2. 軌道計算のタイミング変更
- リストの各項目をクリックしたときに、軌道を再計算するように変更
- `SatelliteOrbitLayer`コンポーネントを修正して、選択されたTLEデータから軌道を計算するように変更
- 軌道計算は`useEffect`内で行い、TLEデータが変更されたときに再計算するように変更

### 3. 型の修正と最適化
- `PassPoint`から`LatLng`への変換処理を追加
- 依存配列の更新と型エラーの修正

## 修正したファイル
- `src/components/Map/index.tsx`
- `src/components/Map/layers/SatelliteOrbitLayer.tsx`

## 効果
- メモリ使用量の削減
- アプリケーションのパフォーマンス向上
- 大量のTLEデータを扱う場合でも安定した動作

## 今後の課題
- 軌道計算のキャッシュ機構の検討（頻繁に同じTLEデータに対して計算する場合）
- 軌道計算の並列処理の検討（複数の衛星を同時に表示する場合）
