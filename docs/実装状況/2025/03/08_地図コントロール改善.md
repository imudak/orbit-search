# 地図コントロール改善

## 概要

地図コントロールの使いやすさを改善するため、以下の変更を実施しました：

1. 地図操作系のコントロールを地図上のアイコンとして直接配置
2. レイヤー機能を凡例パネルに統合
3. 情報の内容を統合情報パネルに統合
4. 不要なコントロールパネルを削除
5. 統合情報パネルのUI/UXを改善し、高さ制限と閉じやすさを向上

## 変更内容

### 新規作成

- `src/components/Map/controls/MapControlIcons.tsx`
  - 拡大/縮小
  - 全体表示
  - 地点に戻る
  といった地図操作用のアイコンを実装

### 更新

- `src/App.tsx`
  - 説明文パネルを削除し、タイトルバーに統合
  - UIのクリーンアップと余分なコードの削除

- `src/components/Map/panels/LegendPanel.tsx`
  - レイヤー管理機能を統合
  - UIをよりコンパクトに改善

- `src/components/Map/panels/SatelliteInfoPanel.tsx`
  - 地図情報セクションを追加
  - 中心座標とズームレベルの表示機能を追加
  - アコーディオン形式で情報を整理し、必要な情報のみ展開可能に
  - 閉じるボタンをパネル内部に配置して常に操作可能に
  - 最大高さを制限（デスクトップ: 60vh、モバイル: 50vh）
  - スクロール可能な領域を明確化し、スクロールバーのスタイルを改善
  - モバイル対応を強化（最大幅を90vwに制限）

- `src/components/Map/index.tsx`
  - UnifiedControlPanelをMapControlIconsに置き換え
  - SatelliteInfoPanelに地図情報を渡すように修正

### 削除

- `src/components/Map/controls/UnifiedControlPanel.tsx`
- `src/components/Map/controls/LayerControls.tsx`

## UI改善のポイント

1. 直感的な操作
   - よく使う地図操作をアイコンとして地図上に直接配置
   - シンプルで分かりやすいデザイン

2. 情報の整理
   - 関連する情報を適切なパネルに集約
   - レイヤー管理と凡例を一つのパネルに統合
   - 情報パネル内の情報をアコーディオンで整理

3. 画面の有効活用
   - 不要なパネルを削除してスペースを確保
   - 情報の重複を排除
   - パネルの高さを制限し、地図の視認性を確保

4. ユーザビリティの向上
   - パネルを常に閉じられるように改善
   - スクロール可能な領域を明確化
   - モバイルデバイスでの表示を最適化

## 動作確認項目

- [ ] 地図操作アイコンの各機能
- [ ] レイヤー管理機能
- [ ] 凡例パネルの表示
- [ ] 統合情報パネルの地図情報表示
- [ ] 統合情報パネルの高さ制限（地図の高さを超えないこと）
- [ ] 統合情報パネルの閉じるボタン機能
- [ ] アコーディオンの展開/折りたたみ機能
- [ ] モバイル表示での適切なレイアウト

## 今後の課題

- モバイル対応のさらなる最適化
- アイコンのツールチップの多言語対応
- パネル内の情報表示のカスタマイズ機能
