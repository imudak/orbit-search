# 実装状況報告書

## 日付
2025年3月6日

## 担当者
Kazumi OKANO

## 概要
軌道計算の時間間隔設定機能と観測データ（Az/El/Range）のダウンロード機能を実装します。

## 実装計画

### 1. 時間間隔の設定機能
- `types/index.ts`の`SearchFilters`インターフェースに`stepSize`パラメータを追加
- `orbitWorker.ts`を修正して時間間隔を設定可能にする

### 2. 観測データダウンロード機能
- 観測データを計算する関数を`orbitService.ts`に追加
- 観測データをCSV形式に変換する関数を追加
- 時間間隔を指定するダイアログコンポーネント`ObservationDataDialog.tsx`を作成
- ダウンロードハンドラーを`App.tsx`に追加
- ダウンロードボタンを`SatelliteList.tsx`に追加

## 実装状況
- [x] `types/index.ts`の修正
- [x] `orbitWorker.ts`の修正
- [x] `orbitService.ts`に観測データ計算関数を追加
- [x] `ObservationDataDialog.tsx`コンポーネントの作成
- [x] `App.tsx`にダウンロードハンドラーを追加
- [x] `SatelliteList.tsx`の修正
- [x] ダイアログのアクセシビリティ問題を修正

## 観測データの内容

ダウンロードされるCSVファイルには、指定された時間間隔ごとの以下の情報が含まれています：

- **時間（Time）**: ISO形式の日時
- **方位角（Azimuth）**: 0〜360度（0度=北、90度=東、180度=南、270度=西）
- **仰角（Elevation）**: -90〜90度（0度=地平線、90度=天頂）
- **距離（Range）**: 観測地点から衛星までの距離（km）

## 衛星リストの抽出条件

衛星リストには以下の条件を満たす衛星が表示されます：

1. 観測地点から理論的に可視である
2. 指定された期間内に、指定された最小仰角以上で観測できる
3. 最大200衛星まで
4. 最大仰角の高い順に並べられる

## 課題・懸念事項
- 時間間隔が小さすぎる場合（例：1秒間隔）、計算量が増大し、ブラウザのパフォーマンスに影響する可能性がある
- 長期間の観測データを細かい時間間隔で計算すると、データ量が膨大になる可能性がある

## 次のステップ
1. ユーザーテストを実施して、機能の使いやすさを評価
2. パフォーマンス最適化（特に小さい時間間隔での計算）
3. 観測データの可視化機能の追加を検討
