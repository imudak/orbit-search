# フェーズ4「アクセシビリティと最適化」実装プロンプト

## 概要
人間工学最適化UI実装計画書のフェーズ4「アクセシビリティと最適化」を実装してください。このフェーズでは、UIのアクセシビリティを向上させ、パフォーマンスを最適化することが目的です。

## 実装タスク

### 1. アクセシビリティの向上
以下の改善を実装してください：

- **コントラスト比の最適化**:
  - すべてのテキストとアイコンがWCAG AAA基準（7:1以上）を満たすようにコントラスト比を調整
  - 特に、TabPanel、OrbitControlPanel、分析タブの視覚的要素のコントラスト比を改善

- **フォントサイズと可読性**:
  - 最小フォントサイズを16pxに設定
  - 行間を1.5倍以上に調整して可読性を向上
  - 長いテキストブロックの幅を制限（最大70文字程度）

- **キーボード操作のサポート**:
  - すべての対話要素にキーボードフォーカスを追加
  - フォーカス状態の視覚的表示を強化
  - タブ順序の最適化
  - ショートカットキーの実装（例：スペースキーで再生/一時停止）

- **スクリーンリーダー対応**:
  - 適切なaria-*属性の追加
  - 意味のある代替テキストの提供
  - フォーム要素のラベル付け

### 2. パフォーマンス最適化
以下の最適化を実装してください：

- **レンダリングの最適化**:
  - React.memoを使用して不要な再レンダリングを防止
  - useCallbackとuseMemoの適切な使用
  - コンポーネントの分割と最適化

- **コード分割と遅延ロード**:
  - React.lazyとSuspenseを使用したコンポーネントの遅延ロード
  - 重いコンポーネント（特に分析タブ）の遅延ロード

- **状態管理の最適化**:
  - 状態更新の効率化
  - 不要な状態の削除または統合

- **スタイルの最適化**:
  - CSS-in-JSの最適化
  - 共通スタイルの抽出と再利用

### 3. ユーザビリティテスト
以下のテストを実施してください：

- **異なるデバイスでのテスト**:
  - デスクトップ、タブレット、モバイルでの表示と操作性の確認
  - タッチ操作の最適化

- **異なるブラウザでのテスト**:
  - Chrome, Firefox, Safari, Edgeでの動作確認
  - ブラウザ間の互換性問題の解決

- **アクセシビリティテスト**:
  - キーボードのみでの操作テスト
  - スクリーンリーダーでの読み上げテスト
  - コントラストチェッカーでの検証

## 具体的な実装手順

1. **TabPanel.tsxの改善**:
   - タブのコントラスト比を向上
   - キーボード操作のサポート追加
   - aria-*属性の追加

2. **OrbitControlPanel.tsxの改善**:
   - コントロール要素のサイズ拡大（タッチターゲットの最小サイズ44x44px）
   - キーボードショートカットの実装
   - フォーカス状態の視覚的表示強化

3. **分析タブの最適化**:
   - 遅延ロードの実装
   - データ計算の最適化
   - 視覚的表示の改善

4. **全体的なパフォーマンス改善**:
   - React DevToolsを使用したプロファイリング
   - ボトルネックの特定と解消
   - バンドルサイズの最適化

## 成果物

1. アクセシビリティとパフォーマンスが向上したコンポーネント
2. テスト結果と改善点のドキュメント
3. 実装状況報告書

## 評価基準

1. Lighthouseアクセシビリティスコア90以上
2. キーボードのみでの完全操作が可能
3. すべての主要ブラウザでの互換性
4. レンダリングパフォーマンスの向上（FPS低下の最小化）
