# 実装状況報告書

## 日付: 2025/03/04

## 担当者: 開発チーム

## 1. 実装項目

### 完了した実装
- ✅ 観測地点からの可視範囲を地図上に表示する機能を追加
- ✅ 衛星高度を考慮した可視範囲の計算方法を実装
- ✅ 最低仰角に基づく可視範囲の表示

### 現在の問題点
- ❌ 実際の衛星軌道高度を取得して計算に使用する機能は未実装（現在は平均的な高度を使用）
- ❌ 複数の衛星種類（LEO、MEO、GEO）に対応した可視範囲の表示が必要

## 2. サービス別の実装状況

### Map.tsx
- 観測地点からの可視範囲を表示する`VisibilityCircle`コンポーネントを追加
- 衛星高度と仰角から可視範囲の半径を計算する`calculateVisibleRadius`関数を実装
- 最低仰角に基づいて可視範囲を表示するように`Map`コンポーネントを修正

### 計算方法
- 平均的な衛星高度（800km）を想定
- 衛星から地球中心までの距離を計算
- 仰角から中心角を計算
- 中心角から地表での距離を計算

## 3. 次のステップ

### 優先度：高
1. 実際の衛星軌道高度を取得して計算に使用する機能の実装
   - 衛星データから軌道高度を取得
   - 衛星種類ごとに適切な可視範囲を計算

2. 複数の衛星種類に対応した可視範囲の表示
   - LEO、MEO、GEOなど異なる軌道の衛星に対応
   - 軌道種類ごとに異なる色や線種で表示

### 優先度：中
1. 可視範囲の表示スタイルの改善
   - 透明度や色の調整
   - 最低仰角に応じた表示の変更

2. パフォーマンスの最適化
   - 計算処理の効率化
   - 表示の最適化

## 4. 技術的な改善点
1. 衛星の軌道要素から高度を正確に計算する方法の実装
2. 地球の扁平率を考慮した計算方法の検討
3. 大気による屈折を考慮した可視範囲の計算
4. 複数の観測地点に対応した可視範囲の表示

## 5. 運用上の注意点
- 可視範囲の計算は平均的な衛星高度を想定しているため、実際の可視性と完全に一致しない場合がある
- 地図の表示範囲によっては可視範囲の円が見えない場合があるため、適切なズームレベルの調整が必要
- 衛星の軌道高度によって可視範囲は大きく変わるため、衛星種類ごとの調整が必要
